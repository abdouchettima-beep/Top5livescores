<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>TOP 5 LEAGUES</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
/* ---- Your full CSS design remains exactly as before ---- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Roboto',sans-serif;
  background: radial-gradient(circle at top, #060607 0%, #0f1113 100%);
  color:#fff;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}
/* splash, header, nav, cards, etc... (unchanged) */
.splash{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:rgba(4,10,30,0.95);flex-direction:column;transition:opacity .6s ease}
.splash.hidden{opacity:0;pointer-events:none;transform:scale(.98)}
.splash .ball{font-size:48px;margin-bottom:10px;animation:pop 1s ease}
.splash .title{font-size:22px;font-weight:700}
@keyframes pop{0%{transform:translateY(8px);opacity:0}60%{transform:translateY(-6px);opacity:1}100%{transform:translateY(0)}}
header{position:sticky;top:0;z-index:200;padding:18px 16px;background:linear-gradient(90deg,#1EA36B,#1E90FF);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.15rem}
.header-inner{display:flex;align-items:center;gap:10px;justify-content:center}
.controls{position:fixed;right:14px;top:14px;z-index:300;display:flex;gap:8px;align-items:center}
.spinner{width:30px;height:30px;border-radius:50%;border:3px solid rgba(255,255,255,0.12);border-top-color:#fff;animation:spin 1s linear infinite;display:none}
.spinner.visible{display:inline-block}
@keyframes spin{to{transform:rotate(360deg)}}
.theme-toggle{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.12);cursor:pointer;border:none;color:#fff;font-size:18px}
.container{max-width:980px;margin:16px auto;padding-bottom:80px}
#admob-banner{margin:12px auto;border-radius:12px;max-width:520px;width:90%;background:rgba(0,0,0,0.25);padding:12px;text-align:center;color:#cfcfcf}
nav{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:12px 0}
nav button{display:flex;align-items:center;gap:8px;padding:10px 12px;border-radius:10px;border:none;background:rgba(255,255,255,0.04);color:#fff;font-weight:600;cursor:pointer}
nav button.active{background:linear-gradient(90deg,#1E90FF,#00B7FF)}
.toggle-bar{display:flex;justify-content:center;gap:10px;margin:12px 0}
.toggle-bar button{padding:10px 16px;border-radius:12px;border:none;background:rgba(255,255,255,0.04);font-weight:700;cursor:pointer}
.toggle-bar button.active{background:linear-gradient(90deg,#28a745,#3bd07f)}
.matches-area{display:flex;flex-direction:column;gap:12px}
.match-box{background:linear-gradient(145deg,#141414,#1f1f1f);border-radius:14px;padding:14px;margin:0 auto;width:90%;max-width:560px;text-align:center}
.section-title{font-weight:800;margin:8px 6px 14px;color:#fff;font-size:1.15rem;padding-left:6%}
.placeholder{color:#9ea3ad;font-style:italic;margin:12px 0;text-align:center}
</style>
</head>
<body>
<div class="splash" id="splash"><div class="ball">âš½</div><div class="title">TOP 5 LEAGUES</div></div>
<header><div class="header-inner"><div class="app-title"><div class="ball-small">âš½</div><div>TOP 5 LEAGUES</div></div></div></header>
<div class="controls"><div class="spinner" id="topSpinner"></div><button class="theme-toggle" id="themeToggle">ðŸŒ™</button></div>

<main class="container" id="mainContent">
  <div id="admob-banner">AdMob Banner Placeholder</div>
  <nav id="leagueNav">
    <button data-league="39" onclick="loadLeague(39,this)"><img src="https://media.api-sports.io/football/leagues/39.png" width="22">Premier League</button>
    <button data-league="140" onclick="loadLeague(140,this)"><img src="https://media.api-sports.io/football/leagues/140.png" width="22">La Liga</button>
    <button data-league="135" onclick="loadLeague(135,this)"><img src="https://media.api-sports.io/football/leagues/135.png" width="22">Serie A</button>
    <button data-league="78" onclick="loadLeague(78,this)"><img src="https://media.api-sports.io/football/leagues/78.png" width="22">Bundesliga</button>
    <button data-league="61" onclick="loadLeague(61,this)"><img src="https://media.api-sports.io/football/leagues/61.png" width="22">Ligue 1</button>
  </nav>
  <div class="toggle-bar">
    <button id="liveBtn" class="active" onclick="showSection('live')">ðŸ”´ Live</button>
    <button id="upcomingBtn" onclick="showSection('upcoming')">ðŸ“… Upcoming</button>
  </div>
  <div id="live-matches"></div>
  <div id="upcoming-matches" style="display:none;"></div>
</main>

<script>
const API_KEY = "bcb3327d3417bafd64a44c4e92b40151";
const AUTO_REFRESH_MS = 30000;
const today = new Date();
let currentSeason = (today.getMonth() >= 7) ? today.getFullYear() : today.getFullYear() - 1;
let currentLeagueId = 39;
let displaying = 'live';
let autoRefreshTimer;

const liveDiv = document.getElementById('live-matches');
const upcomingDiv = document.getElementById('upcoming-matches');
const splash = document.getElementById('splash');
const topSpinner = document.getElementById('topSpinner');

function showSpinner(){topSpinner.classList.add('visible');}
function hideSpinner(){topSpinner.classList.remove('visible');}

async function fetchJSON(url){
  const res = await fetch(url,{headers:{"x-rapidapi-key":API_KEY,"x-rapidapi-host":"api-football-v1.p.rapidapi.com"}});
  const json = await res.json();
  return json;
}

function createCard(m,leagueId){
  const card=document.createElement('div');
  card.className='match-box';
  const date=new Date(m.fixture.date).toLocaleString();
  card.innerHTML=`
    <div><strong>${m.teams.home.name}</strong> vs <strong>${m.teams.away.name}</strong></div>
    <div>${m.goals.home ?? '-'} - ${m.goals.away ?? '-'}</div>
    <div>${m.fixture.status.short} | ${date}</div>
  `;
  return card;
}

async function loadLiveMatches(leagueId){
  showSpinner();
  liveDiv.innerHTML="<div class='section-title'>ðŸ”´ Live Matches</div>";
  const url=`https://api-football-v1.p.rapidapi.com/v3/fixtures?live=all&league=${leagueId}&season=${currentSeason}`;
  const data=await fetchJSON(url);
  if(!data.response?.length){
    liveDiv.innerHTML+="<p class='placeholder'>No live matches right now.</p>";
  }else{
    data.response.forEach(m=>liveDiv.appendChild(createCard(m,leagueId)));
  }
  hideSpinner();
}

async function loadUpcomingMatches(leagueId){
  showSpinner();
  upcomingDiv.innerHTML="<div class='section-title'>ðŸ“… Upcoming Matches</div>";
  let url=`https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=${currentSeason}&from=${today.toISOString().split('T')[0]}&to=${today.toISOString().split('T')[0]}`;
  let data=await fetchJSON(url);

  if(!data.response?.length){
    // If no matches today, get next available
    url=`https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=${currentSeason}&next=10`;
    data=await fetchJSON(url);
  }

  if(!data.response?.length){
    upcomingDiv.innerHTML+="<p class='placeholder'>No upcoming matches found.</p>";
  }else{
    data.response.forEach(m=>upcomingDiv.appendChild(createCard(m,leagueId)));
  }
  hideSpinner();
}

async function loadLeague(leagueId,btn){
  currentLeagueId=leagueId;
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  if(displaying==='live') loadLiveMatches(leagueId);
  else loadUpcomingMatches(leagueId);
}

function showSection(type){
  displaying=type;
  document.getElementById('liveBtn').classList.remove('active');
  document.getElementById('upcomingBtn').classList.remove('active');
  if(type==='live'){
    document.getElementById('liveBtn').classList.add('active');
    liveDiv.style.display='block';upcomingDiv.style.display='none';
    loadLiveMatches(currentLeagueId);
  }else{
    document.getElementById('upcomingBtn').classList.add('active');
    liveDiv.style.display='none';upcomingDiv.style.display='block';
    loadUpcomingMatches(currentLeagueId);
  }
}

function startAutoRefresh(){
  if(autoRefreshTimer) clearInterval(autoRefreshTimer);
  autoRefreshTimer=setInterval(()=>{
    if(displaying==='live') loadLiveMatches(currentLeagueId);
    else loadUpcomingMatches(currentLeagueId);
  },AUTO_REFRESH_MS);
}

async function init(){
  setTimeout(async()=>{
    splash.classList.add('hidden');
    setTimeout(()=>splash.remove(),600);
    await loadLeague(currentLeagueId,document.querySelector('[data-league="39"]'));
    startAutoRefresh();
  },1300);
}
init();
</script>
</body>
</html>
