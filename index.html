<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚öΩ Live Football Scores</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Roboto', sans-serif; background:#121212; color:#fff; }

  header {
    background: linear-gradient(90deg,#1e3c72,#2a5298);
    text-align:center;
    font-size:1.5em;
    font-weight:700;
    padding:15px;
    position: sticky;
    top:0;
    z-index:100;
    box-shadow:0 4px 10px rgba(0,0,0,0.5);
  }

  nav { 
    display:flex; 
    justify-content:center; 
    flex-wrap:wrap; 
    gap:5px; 
    margin:10px 0;
    padding: 0 10px;
  }
  
  nav button {
    flex: 1 1 100px;
    padding:10px 5px;
    border:none;
    border-radius:8px;
    background:#222;
    color:#fff;
    font-weight:500;
    font-size:0.8em;
    cursor:pointer;
    transition:0.3s;
  }
  
  nav button.active { 
    background:#1e90ff; 
    transform: scale(1.05);
  }

  .toggle-bar { 
    display:flex; 
    justify-content:center; 
    gap:8px; 
    margin:10px 0;
    padding: 0 10px;
  }
  
  .toggle-bar button {
    flex: 1;
    padding:12px;
    border:none;
    border-radius:8px;
    background:#222;
    color:#fff;
    font-weight:500;
    cursor:pointer;
    transition:0.3s;
    max-width: 160px;
  }
  
  .toggle-bar button.active { 
    background:#28a745; 
    transform: scale(1.05);
  }

  .section-title { 
    margin:15px 10px 10px; 
    font-size:1.2em; 
    font-weight:700; 
    color:#fff; 
  }

  .match-box {
    background: linear-gradient(145deg, #1f1f1f, #2b2b2b);
    margin:10px;
    padding:15px;
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.6);
    transition:0.3s;
  }

  .teams { 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    gap:10px; 
    font-size:1em; 
    font-weight:600; 
    text-align:center;
    flex-wrap: wrap;
    margin-bottom: 10px;
  }
  
  .team-logo { width:30px; height:30px; object-fit:contain; }

  .score { 
    font-size:1.3em; 
    margin:8px 0; 
    padding:8px 12px; 
    border-radius:8px; 
    font-weight:700; 
    text-align:center;
    background: #1e90ff;
  }
  
  .time { 
    font-size:0.9em; 
    margin:5px 0; 
    padding:6px 10px; 
    border-radius:6px; 
    text-align:center;
    background: #444;
  }
  
  .status { 
    font-size:0.85em; 
    margin-top:8px; 
    padding:6px 10px; 
    border-radius:6px; 
    font-weight:600; 
    text-align:center;
    background: #28a745;
  }

  .loading, .error, .info { 
    text-align: center; 
    padding: 15px; 
    margin: 10px;
    border-radius: 8px;
    font-weight: 500;
  }
  
  .loading { background: #1e3c72; color: #fff; }
  .error { background: #dc3545; color: #fff; }
  .info { background: #444; color: #fff; }

  .hidden { display: none !important; }
</style>
</head>
<body>

<header>‚öΩ Live Football Scores</header>

<nav>
  <button data-league="39" class="active">Premier League</button>
  <button data-league="140">La Liga</button>
  <button data-league="135">Serie A</button>
  <button data-league="78">Bundesliga</button>
  <button data-league="61">Ligue 1</button>
</nav>

<div class="toggle-bar">
  <button id="liveBtn" class="active">Live Matches</button>
  <button id="upcomingBtn">Upcoming Matches</button>
</div>

<div id="status"></div>
<div id="live-matches"></div>
<div id="upcoming-matches" class="hidden"></div>

<script>
// ===== CONFIGURATION =====
const API_KEY = "bcb3327d3417bafd64a44c4e92b40151"; // REPLACE THIS WITH YOUR ACTUAL KEY

// Use CORS proxy for GitHub Pages
const USE_PROXY = true;
const PROXY_URL = 'https://api.allorigins.win/raw?url=';

// League configuration
const leagues = {
  39: { name: 'Premier League', color: '#1E90FF' },
  140: { name: 'La Liga', color: '#FF0000' },
  135: { name: 'Serie A', color: '#00C851' },
  78: { name: 'Bundesliga', color: '#FF8800' },
  61: { name: 'Ligue 1', color: '#800080' }
};

let currentLeagueId = 39;
let currentSection = 'live';

// ===== UTILITY FUNCTIONS =====
function showStatus(message, type = 'info') {
  const statusDiv = document.getElementById('status');
  statusDiv.innerHTML = `<div class="${type}">${message}</div>`;
}

function hideStatus() {
  const statusDiv = document.getElementById('status');
  statusDiv.innerHTML = '';
}

// ===== PROXY FETCH FUNCTION =====
async function fetchWithProxy(url, options = {}) {
  const finalUrl = USE_PROXY ? PROXY_URL + encodeURIComponent(url) : url;
  
  console.log('Fetching:', finalUrl);
  
  try {
    const response = await fetch(finalUrl, {
      ...options,
      headers: {
        'x-rapidapi-key': API_KEY,
        'x-rapidapi-host': 'api-football-v1.p.rapidapi.com',
        ...options.headers
      }
    });
    
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Fetch error:', error);
    throw error;
  }
}

// ===== MATCH LOADING FUNCTIONS =====
async function loadLiveMatches(leagueId) {
  const liveDiv = document.getElementById('live-matches');
  showStatus('üîÑ Loading live matches...', 'loading');
  
  try {
    const url = `https://api-football-v1.p.rapidapi.com/v3/fixtures?live=all&league=${leagueId}&season=2024`;
    const data = await fetchWithProxy(url);
    
    if (!data.response || data.response.length === 0) {
      liveDiv.innerHTML = `
        <div class="section-title">üî¥ Live Matches - ${leagues[leagueId].name}</div>
        <div class="info">No live matches at the moment</div>
      `;
      hideStatus();
      return;
    }
    
    let matchesHTML = `<div class="section-title">üî¥ Live Matches - ${leagues[leagueId].name}</div>`;
    
    data.response.forEach(match => {
      const leagueColor = leagues[leagueId].color;
      const status = match.fixture.status.short;
      
      matchesHTML += `
        <div class="match-box">
          <div class="teams">
            <img class="team-logo" src="${match.teams.home.logo}" alt="${match.teams.home.name}" 
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjE1IiB5PSIxOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SE9NRTwvdGV4dD4KPC9zdmc+'" />
            ${match.teams.home.name}
            <span style="margin: 0 5px;">vs</span>
            <img class="team-logo" src="${match.teams.away.logo}" alt="${match.teams.away.name}"
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjE1IiB5PSIxOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QVdBWTwvdGV4dD4KPC9zdmc+'" />
            ${match.teams.away.name}
          </div>
          <div class="score" style="background: ${leagueColor}">
            ${match.goals.home ?? 0} - ${match.goals.away ?? 0}
          </div>
          <div class="time">‚è± ${match.fixture.status.elapsed || 0}' Minute</div>
          <div class="status" style="background: ${getStatusColor(status)}">
            ${getStatusText(status)}
          </div>
        </div>
      `;
    });
    
    liveDiv.innerHTML = matchesHTML;
    showStatus(`‚úÖ Loaded ${data.response.length} live matches`, 'info');
    setTimeout(hideStatus, 3000);
    
  } catch (error) {
    liveDiv.innerHTML = `
      <div class="section-title">üî¥ Live Matches - ${leagues[leagueId].name}</div>
      <div class="error">Failed to load live matches: ${error.message}</div>
    `;
    showStatus('‚ùå Failed to load matches', 'error');
  }
}

async function loadUpcomingMatches(leagueId) {
  const upcomingDiv = document.getElementById('upcoming-matches');
  showStatus('üîÑ Loading upcoming matches...', 'loading');
  
  try {
    const url = `https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=2024&next=10`;
    const data = await fetchWithProxy(url);
    
    if (!data.response || data.response.length === 0) {
      upcomingDiv.innerHTML = `
        <div class="section-title">üìÖ Upcoming Matches - ${leagues[leagueId].name}</div>
        <div class="info">No upcoming matches found</div>
      `;
      hideStatus();
      return;
    }
    
    let matchesHTML = `<div class="section-title">üìÖ Upcoming Matches - ${leagues[leagueId].name}</div>`;
    
    data.response.forEach(match => {
      const leagueColor = leagues[leagueId].color;
      const matchDate = new Date(match.fixture.date);
      const status = match.fixture.status.short;
      
      matchesHTML += `
        <div class="match-box">
          <div class="teams">
            <img class="team-logo" src="${match.teams.home.logo}" alt="${match.teams.home.name}"
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjE1IiB5PSIxOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SE9NRTwvdGV4dD4KPC9zdmc+'" />
            ${match.teams.home.name}
            <span style="margin: 0 5px;">vs</span>
            <img class="team-logo" src="${match.teams.away.logo}" alt="${match.teams.away.name}"
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2ljdGg9IjMwIiBoZWlnaHQ9IjMwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjE1IiB5PSIxOCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QVdBWTwvdGV4dD4KPC9zdmc+'" />
            ${match.teams.away.name}
          </div>
          <div class="time" style="background: ${leagueColor}">
            üïê ${matchDate.toLocaleDateString()} ${matchDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
          </div>
          <div class="status" style="background: ${getStatusColor(status)}">
            ${getStatusText(status)}
          </div>
        </div>
      `;
    });
    
    upcomingDiv.innerHTML = matchesHTML;
    showStatus(`‚úÖ Loaded ${data.response.length} upcoming matches`, 'info');
    setTimeout(hideStatus, 3000);
    
  } catch (error) {
    upcomingDiv.innerHTML = `
      <div class="section-title">üìÖ Upcoming Matches - ${leagues[leagueId].name}</div>
      <div class="error">Failed to load upcoming matches: ${error.message}</div>
    `;
    showStatus('‚ùå Failed to load matches', 'error');
  }
}

// ===== HELPER FUNCTIONS =====
function getStatusColor(status) {
  const colors = {
    'NS': '#6c757d',    // Not started - gray
    '1H': '#28a745',    // First half - green
    '2H': '#28a745',    // Second half - green  
    'HT': '#ffc107',    // Half time - yellow
    'FT': '#dc3545',    // Full time - red
    'LIVE': '#28a745',  // Live - green
    'PST': '#6c757d',   // Postponed - gray
    'CANC': '#6c757d',  // Canceled - gray
  };
  return colors[status] || '#6c757d';
}

function getStatusText(status) {
  const texts = {
    'NS': 'Not Started',
    '1H': '1st Half',
    '2H': '2nd Half', 
    'HT': 'Half Time',
    'FT': 'Full Time',
    'LIVE': 'Live',
    'PST': 'Postponed',
    'CANC': 'Canceled',
  };
  return texts[status] || status;
}

// ===== EVENT HANDLERS =====
function handleLeagueChange(leagueId, button) {
  // Update active button
  document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
  
  currentLeagueId = leagueId;
  refreshMatches();
}

function handleSectionChange(section, button) {
  // Update active button
  document.querySelectorAll('.toggle-bar button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
  
  // Show/hide sections
  document.getElementById('live-matches').classList.toggle('hidden', section !== 'live');
  document.getElementById('upcoming-matches').classList.toggle('hidden', section !== 'upcoming');
  
  currentSection = section;
  refreshMatches();
}

function refreshMatches() {
  if (currentSection === 'live') {
    loadLiveMatches(currentLeagueId);
  } else {
    loadUpcomingMatches(currentLeagueId);
  }
}

// ===== INITIALIZATION =====
function initializeApp() {
  // Check if API key is set
  if (!API_KEY || API_KEY === "YOUR_REAL_API_KEY_HERE") {
    showStatus('‚ùå Please set your API key in the code!', 'error');
    return;
  }
  
  // Add event listeners to league buttons
  document.querySelectorAll('nav button').forEach(button => {
    button.addEventListener('click', () => {
      const leagueId = parseInt(button.getAttribute('data-league'));
      handleLeagueChange(leagueId, button);
    });
  });
  
  // Add event listeners to section buttons
  document.getElementById('liveBtn').addEventListener('click', () => {
    handleSectionChange('live', document.getElementById('liveBtn'));
  });
  
  document.getElementById('upcomingBtn').addEventListener('click', () => {
    handleSectionChange('upcoming', document.getElementById('upcomingBtn'));
  });
  
  // Load initial data
  showStatus('üöÄ Loading football data...', 'loading');
  refreshMatches();
  
  // Auto-refresh live matches every 30 seconds
  setInterval(() => {
    if (currentSection === 'live') {
      loadLiveMatches(currentLeagueId);
    }
  }, 30000);
}

// Start the app when page loads
document.addEventListener('DOMContentLoaded', initializeApp);
</script>
</body>
</html>
