<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Top 5 Leagues - Live & Upcoming</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #0a0a0a;
    color: #fff;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  header {
    background: linear-gradient(90deg, #1EA36B, #1E90FF);
    padding: 15px;
    font-size: 1.4rem;
    font-weight: bold;
  }
  .section-title {
    font-size: 1.2rem;
    font-weight: 700;
    margin-top: 20px;
  }
  .match {
    background: #1b1b1b;
    border-radius: 10px;
    margin: 12px auto;
    padding: 12px;
    width: 90%;
    max-width: 480px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  }
  .match p {
    margin: 5px 0;
  }
  nav {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 15px 0;
  }
  nav button {
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #1E90FF;
    color: #fff;
    font-weight: 600;
  }
  nav button:hover {
    background: #007bff;
  }
  #toggleButtons {
    margin: 15px 0;
  }
</style>
</head>
<body>
  <header>‚öΩ Top 5 Leagues</header>

  <!-- League selection buttons -->
  <nav>
    <button onclick="loadLeague(39)">Premier League</button>
    <button onclick="loadLeague(140)">La Liga</button>
    <button onclick="loadLeague(135)">Serie A</button>
    <button onclick="loadLeague(78)">Bundesliga</button>
    <button onclick="loadLeague(61)">Ligue 1</button>
  </nav>

  <!-- Toggle buttons -->
  <div id="toggleButtons">
    <button onclick="showMatches('live')">üî¥ Live Matches</button>
    <button onclick="showMatches('upcoming')">üìÖ Upcoming Matches</button>
  </div>

  <div id="matchesContainer">
    <div id="liveMatches">
      <div class="section-title">üî¥ Live Matches</div>
    </div>
    <div id="upcomingMatches" style="display:none">
      <div class="section-title">üìÖ Upcoming Matches</div>
    </div>
  </div>

<script>
const apiKey = "bcb3327d3417bafd64a44c4e92b40151";
const season = 2024;
const proxy = "https://corsproxy.io/?";
let currentLeagueId = 39; // default

async function fetchAPI(url) {
  const fullUrl = proxy + url;
  try {
    const response = await fetch(fullUrl, {
      headers: {
        "X-RapidAPI-Key": apiKey,
        "X-RapidAPI-Host": "api-football-v1.p.rapidapi.com"
      }
    });
    return await response.json();
  } catch (err) {
    console.error("Fetch error:", err);
    return null;
  }
}

async function loadLeague(leagueId) {
  currentLeagueId = leagueId;

  document.getElementById("liveMatches").innerHTML = "<div class='section-title'>üî¥ Loading live matches...</div>";
  document.getElementById("upcomingMatches").innerHTML = "<div class='section-title'>üìÖ Loading upcoming matches...</div>";

  // Live matches
  const liveURL = `https://api-football-v1.p.rapidapi.com/v3/fixtures?live=all&league=${leagueId}&season=${season}`;

  // Upcoming matches: next 30 days
  const today = new Date().toISOString().split('T')[0];
  const nextMonth = new Date();
  nextMonth.setDate(nextMonth.getDate() + 30);
  const nextMonthStr = nextMonth.toISOString().split('T')[0];

  const upcomingURL = `https://api-football-v1.p.rapidapi.com/v3/fixtures?league=${leagueId}&season=${season}&from=${today}&to=${nextMonthStr}`;

  const liveData = await fetchAPI(liveURL);
  const upcomingData = await fetchAPI(upcomingURL);

  // Display live matches
  if (liveData?.response?.length > 0) {
    displayMatches(liveData.response, "liveMatches", "No live matches right now.");
  } else {
    document.getElementById("liveMatches").innerHTML = "<p>No live matches right now.</p>";
  }

  // Display upcoming matches - next 10 only
  if (upcomingData?.response?.length > 0) {
    displayMatches(upcomingData.response.slice(0, 10), "upcomingMatches", "No upcoming matches found.");
  } else {
    document.getElementById("upcomingMatches").innerHTML = "<p>No upcoming matches found.</p>";
  }
}

// Toggle live/upcoming
function showMatches(type) {
  document.getElementById("liveMatches").style.display = type === 'live' ? "block" : "none";
  document.getElementById("upcomingMatches").style.display = type === 'upcoming' ? "block" : "none";
}

// Display matches
function displayMatches(matches, containerId, emptyMsg) {
  const container = document.getElementById(containerId);
  if (!matches || matches.length === 0) {
    container.innerHTML = `<p>${emptyMsg}</p>`;
    return;
  }
  container.innerHTML = "";
  matches.forEach(match => {
    const home = match.teams.home.name;
    const away = match.teams.away.name;
    const homeScore = match.goals.home ?? "-";
    const awayScore = match.goals.away ?? "-";
    const date = new Date(match.fixture.date).toLocaleString();

    container.innerHTML += `
      <div class="match">
        <p><strong>${home}</strong> vs <strong>${away}</strong></p>
        <p>üïí ${date}</p>
        <p>üèÜ ${match.league.name}</p>
        <p>üî¢ Score: ${homeScore} - ${awayScore}</p>
      </div>
    `;
  });
}

// Load default league
loadLeague(currentLeagueId);
</script>
</body>
</html>
